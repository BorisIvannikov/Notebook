<h1 id="tableLabel">Notebook</h1>
<p *ngIf="!persons"><em>Loading...</em></p>

<div class="container">

  <button (click)="openModal()">Create</button>

  <div class="modal" [ngClass]="{'show': showModal}">
    <div class="modal-content">
      <span class="close" (click)="closeModal()">&times;</span>


      <div class="managment-left">
        <p></p>
        <form class="form-person" (ngSubmit)="submitPerson()">
          <div>
            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" [(ngModel)]="person.firstName" required #firstName="ngModel">
          </div>
          <div *ngIf="!firstName.valid" class="warning-message">
            error
          </div>
          <p></p>
          <div>
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" [(ngModel)]="person.lastName" required>
          </div>
          <p></p>
          <div class="removePhoneNumber" *ngFor="let phoneNumber of person.phoneNumbers; let i=index">
            <label for="phoneNumbers{{i}}">Phone Number:</label>
            <input type="tel" id="phoneNumbers{{i}}" name="phoneNumbers{{i}}" [(ngModel)]="person.phoneNumbers[i]" required />
            <button type="button" (click)="removePhoneNumber(i)">Remove</button>
          </div>
          <p></p>
          <div>
            <button type="button" (click)="addPhoneNumber()">Add Phone Number</button>
          </div>
          <p></p>
          <div>
            <button type="submit">{{ submitButtonText }}</button>
          </div>
        </form>
      </div>
    </div>
  </div>


  <div class="table-right">
    <p></p>
    <div>
      <input class="filters-input" type="text" placeholder="Search by First Name" [(ngModel)]="firstNameFilter">
      <input class="filters-input" type="text" placeholder="Search by Last Name" [(ngModel)]="lastNameFilter">
      <input class="filters-input" type="text" placeholder="Search by Phone Number" [(ngModel)]="phoneNumberFilter">
    </div>
    <p></p>
    <table class='table table-striped' aria-labelledby="tableLabel" *ngIf="persons">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Phones</th>
          <th>Update</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>

        <tr *ngFor="let person of filteredPersons">
          <td>{{ person.firstName }}</td>
          <td>{{ person.lastName }}</td>
          <td>{{ getPhoneNumbersAsString(person.phoneNumbers) }}</td>
          <td><button (click)="updatePerson(person)">Update</button></td>
          <td><button (click)="deletePerson(person)">Delete</button></td>
        </tr>
      </tbody>
    </table>
  </div>


</div>
